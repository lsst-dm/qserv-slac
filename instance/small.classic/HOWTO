# Disable DEBUG in the LSST Logger at workers
for h in $(seq --format="qserv-db%02.0f" 31 36); do
    echo; echo "** $h **";
    ssh -n $h "docker exec -i qserv bash -c \"sed -i 's/^log4j.rootLogger=DEBUG, CONSOLE/log4j.rootLogger=ERROR, CONSOLE/' /qserv/run/etc/log4cxx.worker.properties\"";
done

# Stop worker services
for h in $(seq --format="qserv-db%02.0f" 31 36); do
    ssh -n ${h} 'docker exec qserv run/etc/init.d/xrootd stop';
done

# Clear worker logs
for h in $(seq --format="qserv-db%02.0f" 31 36); do
    ssh -n ${h} '\sudo -u qserv rm -v /qserv/qserv-prod/log/*.log'& done;
wait

# Start worker services
for h in $(seq --format="qserv-db%02.0f" 31 36); do
    ssh -n ${h} 'docker exec qserv run/etc/init.d/xrootd start';
done

# Disable DEBUG in the LSST Logger at czar
docker exec -i qserv bash -c "sed -i 's/^log4j.rootLogger=DEBUG, CONSOLE/log4j.rootLogger=ERROR, CONSOLE/' /qserv/run/etc/log4cxx.czar.properties"

# Stop czar
docker exec qserv run/etc/init.d/mysql-proxy stop

# Clear czar's logs
\sudo -u qserv rm -v /qserv/qserv-prod/log/mysql-proxy*

# Start czar
docker exec qserv run/etc/init.d/mysql-proxy start

